# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

### Package Management
- Use `npm` (not yarn) for all package management operations
- Install dependencies: `npm install`
- **Important**: This project uses npm and has `package-lock.json` committed. Do not use yarn commands.
- If you see a `yarn.lock` file, delete it - it was created accidentally
- Add `yarn.lock` to `.gitignore` to prevent future accidents

### Development Server
- Start local development server: `npm start`
- This opens a browser window and provides live reloading for most changes
- The site runs at localhost:3000 with auto-refresh capabilities
- **Important**: For local development, always use `npm start`. Do not use `npm run build` or `npm run serve` for localhost:3000 development, as these commands use production configuration with a different baseUrl (`/broadstripes-docs/`) that will cause routing errors

### Build and Deployment
- Build static site: `npm run build` (generates content into `build/` directory)
- Clear Docusaurus cache: `npm run clear`
- Serve built site locally: `npm run serve`
- Deploy with SSH: `USE_SSH=true npm run deploy`
- Deploy without SSH: `GIT_USER=<username> npm run deploy`

### Other Available Commands
- `npm run swizzle` - Customize Docusaurus components
- `npm run write-translations` - Generate translation files
- `npm run write-heading-ids` - Add heading IDs to markdown files

### Search Configuration
The site uses Algolia for search functionality. The local search plugin (@easyops-cn/docusaurus-search-local) has been removed as of July 2025.

**Algolia Configuration**:
- Located in `docusaurus.config.js` under `themeConfig.algolia`
- App ID: `VS5HA1BXO2`
- Index Name: `broadstripes-docs`
- The search box appears automatically in the navbar
- Search works in both development (`npm start`) and production builds

Note: Algolia requires the site to be publicly accessible for indexing. The search may not show results until Algolia has crawled and indexed the site.

## Architecture Overview

### Site Configuration
- **Primary Framework**: Docusaurus 3.7.0 with classic preset
- **Routing**: Documentation served at site root (`/`) instead of `/docs/`
- **Content Source**: `docs/` directory with auto-generated sidebar from file structure
- **Styling**: Custom CSS + Tailwind CSS integration via PostCSS plugin
- **Icons**: FontAwesome integration with React components

### Content Organization
- **Main Documentation**: `docs/` directory with markdown/MDX files
- **Sidebar**: Auto-generated from folder structure (`sidebars.js` uses `{type: 'autogenerated', dirName: '.'}`)
- **Drafts**: `docs/drafts/` folder excluded from builds via `exclude: ['**/drafts/**']`
- **Static Assets**: `static/img/` contains images organized by content sections
- **Categories**: Defined via `_category_.json` files in subdirectories

### Key Content Sections
- `getting-started/` - User onboarding and basic tasks
- `search/` - Advanced search functionality and features  
- `viewing-search-results-and-edit/` - Results management and bulk actions
- `tutorial-basics/` and `tutorial-extras/` - Legacy Docusaurus tutorial content

### Custom Components
- **ReleaseNotesTable** (`src/components/ReleaseNotesTable/`): Interactive filterable table for release notes
  - Data source: `src/data/releaseNotes.js` (large JS array, read with limit for performance)
  - Features: Search, type filtering, category filtering, responsive design
  - Styling: Tailwind classes with custom Broadstripes branding (red theme)
- **FontAwesome Integration**: `src/utils/fontawesome.js` and client-side setup

### Webpack Configuration  
- Custom webpack plugin for browser polyfills (path, os, url, fs)
- Tailwind CSS configured via custom PostCSS plugin
- Client modules loaded from `src/clientModules.js`

### Site Metadata
- Title: "Broadstripes Help Center"
- URL: https://help.broadstripes.com
- GitHub edit links point to: https://github.com/broadstripes/help-center/tree/main/
- Footer includes current year copyright
- Dark/light theme support with custom logo variants

### Search Implementation
- **Search Provider**: Algolia (as of July 2025)
- **Configuration**: In `docusaurus.config.js` under `themeConfig.algolia`
  - appId: VS5HA1BXO2
  - indexName: broadstripes-docs
- **Previous Setup**: The site previously used @easyops-cn/docusaurus-search-local plugin and had a custom LandingPageSearch component, both of which have been removed

### WordPress Migration
- `wordpress-pull/` directory contains converted content from WordPress
- Organized by content type (`et_pb_layout/`, `page/`, `post/`, etc.)
- Images preserved in nested `images/` directories
- Conversion script: `wp_md_cleaner.py`