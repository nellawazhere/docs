# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

### Package Management
- Use `npm` (not yarn) for all package management operations
- Install dependencies: `npm install`
- **Important**: This project uses npm and has `package-lock.json` committed. Do not use yarn commands.
- If you see a `yarn.lock` file, delete it - it was created accidentally
- Add `yarn.lock` to `.gitignore` to prevent future accidents

### Development Server
- Start local development server: `npm start`
- This opens a browser window and provides live reloading for most changes
- The site runs at localhost with auto-refresh capabilities

### Build and Deployment
- Build static site: `npm run build` (generates content into `build/` directory)
- Clear Docusaurus cache: `npm run clear`
- Serve built site locally: `npm run serve`
- Deploy with SSH: `USE_SSH=true npm run deploy`
- Deploy without SSH: `GIT_USER=<username> npm run deploy`

### Other Available Commands
- `npm run swizzle` - Customize Docusaurus components
- `npm run write-translations` - Generate translation files
- `npm run write-heading-ids` - Add heading IDs to markdown files

### Local Search
The site uses @easyops-cn/docusaurus-search-local for all environments.

To test search functionality locally:
1. Build the site first: `npm run build`
2. Serve the built site: `npm run serve`
3. Search will now work at http://localhost:3000

Note: Search doesn't work with `npm start` as it requires a built search index. Regular development can continue with `npm start` - only use build/serve when you need to test search.

Algolia search configuration is preserved in comments for future use when a live environment is ready.

## Architecture Overview

### Site Configuration
- **Primary Framework**: Docusaurus 3.7.0 with classic preset
- **Routing**: Documentation served at site root (`/`) instead of `/docs/`
- **Content Source**: `docs/` directory with auto-generated sidebar from file structure
- **Styling**: Custom CSS + Tailwind CSS integration via PostCSS plugin
- **Icons**: FontAwesome integration with React components

### Content Organization
- **Main Documentation**: `docs/` directory with markdown/MDX files
- **Sidebar**: Auto-generated from folder structure (`sidebars.js` uses `{type: 'autogenerated', dirName: '.'}`)
- **Drafts**: `docs/drafts/` folder excluded from builds via `exclude: ['**/drafts/**']`
- **Static Assets**: `static/img/` contains images organized by content sections
- **Categories**: Defined via `_category_.json` files in subdirectories

### Key Content Sections
- `getting-started/` - User onboarding and basic tasks
- `search/` - Advanced search functionality and features  
- `viewing-search-results-and-edit/` - Results management and bulk actions
- `tutorial-basics/` and `tutorial-extras/` - Legacy Docusaurus tutorial content

### Custom Components
- **ReleaseNotesTable** (`src/components/ReleaseNotesTable/`): Interactive filterable table for release notes
  - Data source: `src/data/releaseNotes.js` (large JS array, read with limit for performance)
  - Features: Search, type filtering, category filtering, responsive design
  - Styling: Tailwind classes with custom Broadstripes branding (red theme)
- **FontAwesome Integration**: `src/utils/fontawesome.js` and client-side setup

### Webpack Configuration  
- Custom webpack plugin for browser polyfills (path, os, url, fs)
- Tailwind CSS configured via custom PostCSS plugin
- Client modules loaded from `src/clientModules.js`

### Site Metadata
- Title: "Broadstripes Help Center"
- URL: https://help.broadstripes.com
- GitHub edit links point to: https://github.com/broadstripes/help-center/tree/main/
- Footer includes current year copyright
- Dark/light theme support with custom logo variants

### Search Configuration
- **All Environments**: Uses @easyops-cn/docusaurus-search-local for offline search
- **Future Algolia Integration**: Configuration is preserved in comments in docusaurus.config.js
  - appId: VS5HA1BXO2
  - indexName: broadstripes-docs
- **Custom Landing Page Search**: 
  - Component: `/src/components/LandingPageSearch/index.js`
  - Styles: `/src/components/LandingPageSearch/styles.module.css`
  - Redirects to `/?q=searchQuery` for local search
  - Styled with CSS modules for consistent appearance

### WordPress Migration
- `wordpress-pull/` directory contains converted content from WordPress
- Organized by content type (`et_pb_layout/`, `page/`, `post/`, etc.)
- Images preserved in nested `images/` directories
- Conversion script: `wp_md_cleaner.py`